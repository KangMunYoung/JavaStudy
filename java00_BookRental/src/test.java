import java.util.Collection;
import java.util.Iterator;
import java.util.Scanner;

import EmpInfor.EmpDataSet;
import EmpInfor.EmpVO;

public class EmpManager {
	Scanner scan = new Scanner(System.in);
	String menuTitle = "???[1.?????????, 2.??????, 3.???????, 4.???????, 5.????]";
	public EmpManager() {

	}
	public void employeeStart() {	//???? ????
		boolean logResult=false;
		do {
			//?¥á???
			String userid = inData("?????");
			String userpwd = inData("??¬Û??");
			Login log = new Login();
			logResult = log.loginCheck(userid, userpwd);
		}while(!logResult);
		
		//?¥á??? ??????? ???? ??.
		//????? ?? ???? ????
		EmpDataSet.basicEmpSet();
//		System.out.println("?¥á??¥ì???");
		allEmpList();
		EmpProcessStart();
	}
	public void EmpProcessStart() {
		do {
			//??????
			String menu = inData(menuTitle);
			if(menu.equals("1")) { //?????????
				allEmpList();
			}else if(menu.equals("2")) { //??????
				empInsert();
				allEmpList();
			}else if(menu.equals("3")) {//???????(??????? ????? ????)
				empUpdate();
				allEmpList();
			}else if(menu.equals("4")) {//???????
				empDelete();
				allEmpList();
			}else if(menu.equals("5")) {//???¥á??????
				System.out.println("???¥á???? ???????????.");
				System.exit(0);
			}else {
				System.out.println("????? ???????????????. ??? ????????.");
			}
		}while(true);
	}
	//???????
	public void empDelete() {
		String delName = inData("?????? ?????");
		EmpDataSet.empList.remove(delName);
	}
	//???????
	public void empUpdate() {
		//?????? ?????? ???
		String editName = inData("?????? ????????");
		
		String editMenu = inData("?????? ??å°??[1.?????, 2.???]");
		if(editMenu.equals("1")) {//????? ????
			telUpdate(editName);
		}else if(editMenu.equals("2")) {
			salUpdate(editName);
		}else {
			System.out.println("????? ???????????????.");
		}
		////
	}
	//?????????
	public void telUpdate(String username) {
		String tel = inData("?????? ????????");
		EmpVO vo = EmpDataSet.empList.get(username);
		vo.setTel(tel);
	}
	//???????
	public void salUpdate(String username) {
		int sal = Integer.parseInt(inData("?????? ??? ???"));
		EmpVO vo = EmpDataSet.empList.get(username);
		vo.setSal(sal);
	}
	//??????
	public void empInsert() {
		//1???? ????????? ?????? VO??? ???????
		EmpVO vo = new EmpVO();
		
		//??????
		vo.setEmpNo(inData("??????"));
		vo.setEmpName(inData("?????"));
		vo.setTel(inData("?????"));
		
		do {
			boolean flag = true;
			try {	
				vo.setSal(Integer.parseInt(inData("???")));//----??????????
			}catch(NumberFormatException nfe) {
				flag = false;
				System.out.println("????? ????? ????????....");
			}
			if(flag) break;
		}while(true);
		vo.setHiredate(inData("?????"));
		
		EmpDataSet.empList.put(vo.getEmpName(), vo);
	}
	//????????? ??????
	public void allEmpList() {
		//???????
		EmpVO.titlePrint();
		Collection<EmpVO> list =EmpDataSet.empList.values();
		Iterator<EmpVO> ii = list.iterator();
		while(ii.hasNext()) {
			EmpVO vo = ii.next();
			vo.empPrint();
		}
	}
	//?????? ??????©ö?? ????
	public String inData(String msg) {
		System.out.print(msg+"->");
		return scan.nextLine();
	}
}
